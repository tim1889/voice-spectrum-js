"use strict";function spectrum(e){function t(e,t){var i=e.createBufferSource(),o=e.createAnalyser();i.connect(o),o.connect(e.destination),i.connect(e.destination),i.buffer=t,i.start(0),n(o,i)}function n(e,t){var n=function r(n){if(o)return t.stop(0),void i([]);var c=new Uint8Array(64);e.getByteFrequencyData(c),i(c),window.requestAnimationFrame(r)};window.requestAnimationFrame(n)}function i(e){c.clearRect(0,0,200,200);for(var t=0;t<e.length;t++)c.fillStyle="#c0dfd9",c.fillRect(4*t,100-e[t]/4,2,e[t]/2),c.fill()}var o=!0,r=document.getElementById(e.canvas),c=r.getContext("2d");r.width=200,r.height=200,r.style.visibility="visible",r.onclick=function(){if(!o)return void(o=!0);o=!1;var n=window.AudioContext||window.webkitAudioContext,i=new n,r=new FileReader;r.onload=function(e){var n=e.target.result;i.decodeAudioData(n,function(e){t(i,e)},function(e){console.log("error: ",e)})},r.readAsArrayBuffer(e.source)}}